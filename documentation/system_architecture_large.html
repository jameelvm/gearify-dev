<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gearify - High-Level System Architecture</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 20px;
            background: #1e293b;
            color: white;
        }
        h1 {
            color: #60a5fa;
            text-align: center;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #94a3b8;
            margin-bottom: 30px;
            font-size: 18px;
        }
        .diagram-container {
            background: white;
            padding: 40px;
            margin: 20px auto;
            border-radius: 12px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            overflow: auto;
            min-height: 1200px;
        }
        .mermaid {
            display: flex;
            justify-content: center;
            min-width: 1800px;
        }
        .legend {
            background: #334155;
            padding: 20px;
            margin: 20px auto;
            border-radius: 8px;
            max-width: 1200px;
        }
        .legend h3 {
            color: #60a5fa;
            margin-top: 0;
        }
        .legend-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        .legend-item {
            background: #475569;
            padding: 12px;
            border-radius: 6px;
            font-size: 14px;
        }
        .legend-item strong {
            color: #93c5fd;
            display: block;
            margin-bottom: 5px;
        }
        .note {
            background: #1e40af;
            padding: 15px;
            margin: 20px auto;
            border-radius: 8px;
            max-width: 1200px;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>üèè Gearify - High-Level System Architecture</h1>
    <p class="subtitle">Global Multi-Tenant Cricket E-Commerce Platform</p>

    <div class="note">
        üí° <strong>Tip:</strong> Scroll horizontally to see the full diagram. The diagram is extra large for better readability.
    </div>

    <div class="diagram-container">
        <div class="mermaid">
graph TB
    subgraph CLIENT["üåê Client Layer"]
        WEB["Web Browser<br/>(Angular 18 SSR)"]
        MOBILE["Mobile App<br/>(iOS/Android)"]
    end

    subgraph EDGE["‚ö° Edge & Security Layer"]
        CDN["CloudFront CDN<br/>Global Distribution"]
        WAF["AWS WAF<br/>Web Application Firewall<br/>DDoS Protection"]
        ALB["Application Load Balancer<br/>SSL Termination"]
    end

    subgraph GATEWAY["üö™ API Gateway Layer"]
        APIGW["API Gateway Service<br/>YARP Reverse Proxy<br/>.NET 8<br/><br/>‚Ä¢ JWT Validation<br/>‚Ä¢ Rate Limiting<br/>‚Ä¢ Request Routing"]
    end

    subgraph CORE["üíº Core Business Services"]
        CATALOG["üì¶ Catalog Service<br/><br/>‚Ä¢ Product Management<br/>‚Ä¢ Categories<br/>‚Ä¢ Search<br/>‚Ä¢ Inventory Tracking"]
        ORDER["üõí Order Service<br/><br/>‚Ä¢ Order Processing<br/>‚Ä¢ Order Lifecycle<br/>‚Ä¢ Fulfillment"]
        PAYMENT["üí≥ Payment Service<br/><br/>‚Ä¢ Stripe Integration<br/>‚Ä¢ PayPal Integration<br/>‚Ä¢ Refunds<br/>‚Ä¢ Reconciliation"]
        CART["üõçÔ∏è Cart Service<br/><br/>‚Ä¢ Shopping Cart<br/>‚Ä¢ Cart Persistence<br/>‚Ä¢ Abandoned Cart"]
    end

    subgraph SUPPORT["üîß Supporting Services"]
        SHIPPING["üìÆ Shipping Service<br/><br/>‚Ä¢ Rate Calculation<br/>‚Ä¢ Label Generation<br/>‚Ä¢ Carrier Integration<br/>‚Ä¢ Tracking"]
        CUSTOMER["üë§ Customer Service<br/><br/>‚Ä¢ User Profiles<br/>‚Ä¢ Address Management<br/>‚Ä¢ Preferences"]
        SEARCH["üîç Search Service<br/><br/>‚Ä¢ Product Search<br/>‚Ä¢ Faceted Filters<br/>‚Ä¢ Suggestions"]
        REVIEW["‚≠ê Review Service<br/><br/>‚Ä¢ Product Reviews<br/>‚Ä¢ Ratings<br/>‚Ä¢ Moderation"]
    end

    subgraph PLATFORM["üèóÔ∏è Platform Services"]
        TENANT["üè¢ Tenant Service<br/><br/>‚Ä¢ Multi-Tenancy<br/>‚Ä¢ Tenant Config<br/>‚Ä¢ Branding"]
        NOTIF["üìß Notification Service<br/><br/>‚Ä¢ Email (SES)<br/>‚Ä¢ SMS<br/>‚Ä¢ Push Notifications"]
        FLAG["üö© Feature Flag Service<br/><br/>‚Ä¢ Feature Toggles<br/>‚Ä¢ A/B Testing<br/>‚Ä¢ Rollouts"]
        INVENTORY["üìä Inventory Service<br/><br/>‚Ä¢ Stock Management<br/>‚Ä¢ Reservations<br/>‚Ä¢ Low Stock Alerts"]
        ANALYTICS["üìà Analytics Service<br/><br/>‚Ä¢ Business Metrics<br/>‚Ä¢ Reports<br/>‚Ä¢ Dashboards"]
    end

    subgraph DATA["üíæ Data Layer"]
        DYNAMO["DynamoDB<br/><br/>‚Ä¢ Products<br/>‚Ä¢ Orders<br/>‚Ä¢ Customers<br/>‚Ä¢ Tenants"]
        POSTGRES["PostgreSQL RDS<br/><br/>‚Ä¢ Payments<br/>‚Ä¢ Transactions<br/>‚Ä¢ Reconciliation"]
        REDIS["Redis ElastiCache<br/><br/>‚Ä¢ Session Cache<br/>‚Ä¢ Product Cache<br/>‚Ä¢ Rate Limiting"]
        S3["S3 Storage<br/><br/>‚Ä¢ Product Images<br/>‚Ä¢ Documents<br/>‚Ä¢ Backups"]
    end

    subgraph MESSAGING["üì® Messaging Layer"]
        SNS["SNS Topics<br/>Event Publishing"]
        SQS["SQS Queues<br/>Event Consumption"]
    end

    subgraph EXTERNAL["üåç External Services"]
        STRIPE["Stripe API<br/>Payment Gateway"]
        PAYPAL["PayPal API<br/>Payment Gateway"]
        CARRIERS["Shipping Carriers<br/>FedEx ‚Ä¢ DHL ‚Ä¢ UPS"]
        SES["AWS SES<br/>Email Service"]
    end

    %% Client to Edge
    WEB -->|HTTPS| CDN
    MOBILE -->|HTTPS| CDN

    %% Edge Layer Flow
    CDN -->|Security Check| WAF
    WAF -->|Route Traffic| ALB
    ALB -->|Forward Request| APIGW

    %% Gateway to Core Services
    APIGW -->|/catalog| CATALOG
    APIGW -->|/orders| ORDER
    APIGW -->|/payments| PAYMENT
    APIGW -->|/cart| CART

    %% Gateway to Support Services
    APIGW -->|/shipping| SHIPPING
    APIGW -->|/customers| CUSTOMER
    APIGW -->|/search| SEARCH
    APIGW -->|/reviews| REVIEW

    %% Gateway to Platform Services
    APIGW -->|/tenants| TENANT
    APIGW -->|/flags| FLAG

    %% Core Services to Data
    CATALOG -->|Read/Write| DYNAMO
    CATALOG -->|Cache| REDIS
    CATALOG -->|Store Images| S3

    ORDER -->|Read/Write| DYNAMO
    ORDER -->|Cache| REDIS

    PAYMENT -->|Transactions| POSTGRES
    PAYMENT -->|Cache| REDIS

    CART -->|Cache| REDIS
    CART -->|Backup| DYNAMO

    %% Support Services to Data
    SHIPPING -->|Read/Write| DYNAMO
    SHIPPING -->|Cache Rates| REDIS

    CUSTOMER -->|Read/Write| DYNAMO
    CUSTOMER -->|Sessions| REDIS

    SEARCH -->|Read| DYNAMO
    SEARCH -->|Cache Results| REDIS

    REVIEW -->|Read/Write| DYNAMO
    REVIEW -->|Cache| REDIS

    %% Platform Services to Data
    TENANT -->|Read/Write| DYNAMO
    TENANT -->|Heavy Cache| REDIS

    FLAG -->|Read/Write| DYNAMO
    FLAG -->|Cache| REDIS

    INVENTORY -->|Read/Write| DYNAMO
    INVENTORY -->|Locks| REDIS

    ANALYTICS -->|Read Events| DYNAMO
    ANALYTICS -->|Data Lake| S3

    %% Event Publishing
    CATALOG -.->|Product Events| SNS
    ORDER -.->|Order Events| SNS
    PAYMENT -.->|Payment Events| SNS
    SHIPPING -.->|Shipping Events| SNS
    CUSTOMER -.->|Customer Events| SNS
    INVENTORY -.->|Inventory Events| SNS

    %% Event Distribution
    SNS -.->|Fan-out| SQS

    %% Event Consumption
    SQS -.->|Process| NOTIF
    SQS -.->|Aggregate| ANALYTICS
    SQS -.->|Update| INVENTORY
    SQS -.->|Index| SEARCH

    %% External Service Integrations
    PAYMENT -->|Process Payments| STRIPE
    PAYMENT -->|Process Payments| PAYPAL
    SHIPPING -->|Get Rates & Labels| CARRIERS
    NOTIF -->|Send Emails| SES

    %% Styling
    style APIGW fill:#ef4444,stroke:#991b1b,stroke-width:4px,color:#fff
    style CATALOG fill:#3b82f6,stroke:#1e40af,stroke-width:3px,color:#fff
    style ORDER fill:#3b82f6,stroke:#1e40af,stroke-width:3px,color:#fff
    style PAYMENT fill:#f59e0b,stroke:#b45309,stroke-width:3px,color:#fff
    style CART fill:#3b82f6,stroke:#1e40af,stroke-width:3px,color:#fff

    style DYNAMO fill:#10b981,stroke:#047857,stroke-width:3px,color:#fff
    style POSTGRES fill:#10b981,stroke:#047857,stroke-width:3px,color:#fff
    style REDIS fill:#fbbf24,stroke:#d97706,stroke-width:3px,color:#000
    style S3 fill:#10b981,stroke:#047857,stroke-width:3px,color:#fff

    style SNS fill:#f97316,stroke:#c2410c,stroke-width:3px,color:#fff
    style SQS fill:#f97316,stroke:#c2410c,stroke-width:3px,color:#fff

    style STRIPE fill:#8b5cf6,stroke:#6d28d9,stroke-width:3px,color:#fff
    style PAYPAL fill:#8b5cf6,stroke:#6d28d9,stroke-width:3px,color:#fff
        </div>
    </div>

    <div class="legend">
        <h3>üìö Architecture Components</h3>
        <div class="legend-grid">
            <div class="legend-item">
                <strong>üåê Client Layer</strong>
                Angular 18 SSR web app + mobile apps
            </div>
            <div class="legend-item">
                <strong>‚ö° Edge Layer</strong>
                CloudFront, WAF, Load Balancer
            </div>
            <div class="legend-item">
                <strong>üö™ API Gateway</strong>
                YARP reverse proxy, auth, routing
            </div>
            <div class="legend-item">
                <strong>üíº Core Services</strong>
                Catalog, Order, Payment, Cart
            </div>
            <div class="legend-item">
                <strong>üîß Support Services</strong>
                Shipping, Customer, Search, Reviews
            </div>
            <div class="legend-item">
                <strong>üèóÔ∏è Platform Services</strong>
                Tenant, Notifications, Feature Flags
            </div>
            <div class="legend-item">
                <strong>üíæ Data Stores</strong>
                DynamoDB, PostgreSQL, Redis, S3
            </div>
            <div class="legend-item">
                <strong>üì® Messaging</strong>
                SNS/SQS for async events
            </div>
            <div class="legend-item">
                <strong>üåç External Services</strong>
                Stripe, PayPal, Shipping Carriers
            </div>
        </div>
    </div>

    <div class="legend">
        <h3>üîë Key Architecture Principles</h3>
        <div class="legend-grid">
            <div class="legend-item">
                <strong>Microservices</strong>
                14 independent services, each with single responsibility
            </div>
            <div class="legend-item">
                <strong>Event-Driven</strong>
                Async communication via SNS/SQS for loose coupling
            </div>
            <div class="legend-item">
                <strong>Multi-Tenant</strong>
                Tenant isolation via partition keys and domain routing
            </div>
            <div class="legend-item">
                <strong>CQRS</strong>
                Separate read/write models for better scalability
            </div>
            <div class="legend-item">
                <strong>Polyglot Persistence</strong>
                Right database for each use case
            </div>
            <div class="legend-item">
                <strong>Cloud-Native</strong>
                Kubernetes on AWS EKS with auto-scaling
            </div>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: false,
                htmlLabels: true,
                curve: 'basis',
                padding: 20,
                nodeSpacing: 150,
                rankSpacing: 100
            },
            fontSize: 16
        });
    </script>
</body>
</html>
